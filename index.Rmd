---
title: "Bellabeat Case Study"
author: "Brian Wu"
date: "7/29/2021"
output: 
    html_document:
        theme: cosmo
        toc: yes
        toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

<center>
![Bellabeat Logo](bellabeat_logo.jpg)
</center>

<center>
Image Source: [Bellabeat Facebook Page](https://www.facebook.com/bellabeat/photos/a.1414210192155247/2749506195292300/)
</center>

$~$

[Bellabeat](https://bellabeat.com/) is a tech-driven wellness company founded in 2013 by Sandro Mur and Urška Sršen. Bellabeat specializes in health-focused smart products for women and offer a line of products that help empower users with knowledge about their own health and habits. These products include:

- **Bellabeat App:** Provides users with a hub to track their health data related to their habits and activities.

- **Leaf:** Wellness tracker that can be worn as a bracelet, necklace, or clip that tracks activity, sleep, and stress. Connects to the Bellabeat app to provide the user insights into their daily wellness.

- **Time:** A watch that tracks user activity, sleep, and stress. Connects to the Bellabeat app to provide the user insights into their daily wellness.

- **Spring:** A water bottle that tracks daily water intake. Connects to the Bellabeat app to provide the user insights into their daily wellness.

- **Membership:** Gives users 24/7 access to fully personalized guidance based on their lifestyle and goals.

$~$

## Objective

Using data gathered from non-Bellabeat smart devices, we perform exploratory data analysis to try to identify trends in smart device usage and how those trends can help influence Bellabeat's marketing strategy.

$~$

## The Data

<center>
![fitbit](fitbit_devices.jpg)
</center>
[Image Source](https://images.app.goo.gl/P7UzfzD7pxtmUiBf9)

The data used in this analysis is from [Kaggle](https://www.kaggle.com/arashnic/fitbit) and was made available by the user [Möbius](https://www.kaggle.com/arashnic). These datasets were generated by respondents to a distributed survey via Amazon Mechanical Turk. 30 eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

Upon initial examination of the 18 datasets in Excel, we immediately notice a few things:

- Data was collected between 3/12/2016 and 5/12/2016. 
- Datasets have differing levels of granularity, with some datasets containing minute-to-minute data and others containing daily data. 
- Several of the datasets are available in both long and wide formats
- There does not appear to be any data regarding water intake.

We will keep these observations in mind as we delve deeper into the data.

$~$

## Loading the Data

Let's start by load the necessary libraries:
```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
```


Importing the datasets:
```{r}
daily_activity <- read_csv("dailyActivity_merged.csv")
daily_sleep <- read_csv("sleepDay_merged.csv")
weight_log <- read_csv("weightLogInfo_merged.csv")
```

$~$

Next we'll quickly examine the structure of each of the three tables using head() and glimpse():

### Activity Dataset
```{r}
head(daily_activity)
glimpse(daily_activity)
```


### Sleep Dataset
```{r}
head(daily_sleep)
glimpse(daily_sleep)
```


### Weight Dataset
```{r}
head(weight_log)
glimpse(weight_log)
```

We can see that the in the Activity Dataset, the "ActivityDate" columns has a data type of character. Similarly for the sleep and weight datasets, the date columns for each also have a data type of character. We will need to convert these columns to a data type of date. Furthermore in the sleep and weight datasets, we see that the date columns have both the date as well as the time so we will need to take care of that as well.

$~$

## Cleaning the Data

To start off, we will remove columns that are redundant or unnecessary.

### Dropping unnecessary columns

In the daily_activity the columns TrackerDistance and LoggedActivityDistance are not needed since we already have a TotalDistance column which is the sum of the previous 2 columns mentioned. We'll go ahead and remove those 2 columns.
```{r}
daily_activity_clean <- 
    daily_activity %>% 
    select(-TrackerDistance,
           -LoggedActivitiesDistance)

head(daily_activity_clean)
```


In the daily_sleep dataset, we can remove the TotalSleepRecords column as it is irrelevant for this analysis.
```{r}
daily_sleep_clean <- 
    daily_sleep %>% 
    select(-TotalSleepRecords)

head(daily_activity_clean)
```

In the weight_log dataset, we can remove the Fat (only has 2 records, the rest are all NA), IsManualReport, and LogId columns as they are unnecessary.
```{r}
weight_log_clean <- 
    weight_log %>% 
    select(-Fat,
           -IsManualReport,
           -LogId)

head(weight_log_clean)
```

$~$

### Removing Duplicate Rows

We will now remove duplicate rows from each dataset:

```{r}
daily_activity_clean <- 
    daily_activity_clean %>% 
    distinct()

daily_sleep_clean <- 
    daily_sleep_clean %>% 
    distinct()

weight_log_clean <- 
    weight_log_clean %>% 
    distinct()
```


```{r}
# Uncleaned dataset had 940 rows and 15 columns
nrow(daily_activity_clean)

# Uncleaned dataset had 413 rows and 55 columns
nrow(daily_sleep_clean)

# Uncleaned dataset had 67 rows and 8 columns
nrow(weight_log_clean)
```

From the above we see that the daily_sleep dataset had 3 duplicate rows removed while the other 2 datasets were unmodified.

$~$

### Formatting the Date Columns to Data Type Date

As mentioned earlier, the date type of the date column in all 3 tables were formatted as character data type. We will convert it into a date data type.
```{r}
daily_activity_clean$ActivityDate <- mdy(daily_activity_clean$ActivityDate)

head(daily_activity_clean)
```


```{r warning=FALSE}
# Separate the date column into 2 rows, then drop the Time column
daily_sleep_clean <- 
    daily_sleep_clean %>% 
    separate(SleepDay, c("SleepDay", "Time"), sep=" ") %>% 
    select(-Time)

# Convert Date column to mdy format
daily_sleep_clean$SleepDay <- mdy(daily_sleep_clean$SleepDay)
    

head(daily_sleep_clean)
```


```{r warning=FALSE}
# Separate the date column into 2 rows, then drop the Time column
weight_log_clean <- 
    weight_log_clean %>% 
    separate(Date, c("Date", "Time"), sep=" ") %>% 
    select(-Time)

# Convert Date column to mdy format
weight_log_clean$Date <- mdy(weight_log_clean$Date)
    

head(weight_log_clean)
```


$~$

### Summarizing the Data/Checking for NA's

We will use summary() to get descriptive statistics for each dataset to check for any obvious issues for each variable. Summary() also comes with the added benefit of providing of with the count of the NA's for each column, if any.
```{r}
daily_activity_clean %>% 
    select(-Id,
           -ActivityDate) %>% 
    summary()
```


```{r}
daily_sleep %>% 
    select(TotalMinutesAsleep, 
           TotalTimeInBed) %>% 
    summary()
```


```{r}
weight_log_clean %>% 
    select(-Id,
           -Date) %>% 
    summary()
```

Based on the output, there does not appear to be any obvious outliers and there are no NA's for any column as well. We can now merge the three dataset

$~$

### Merging the Datasets

For each of the three datasets, we see that the ID and Date fields are present and we can 

Let's first check the number of unique IDs for each dataset:
```{r}
n_distinct(daily_activity$Id)
n_distinct(daily_sleep$Id)
n_distinct(weight_log$Id)
```

From this we see that 33 individuals logged data for activity while only 24 and 8 users logged data for sleep and weight, respectively. We will

$~$

## Exploratory Data Analysis



$~$

## Conclusions

**Limitations of the Data**

There are several limitations of the data that could


